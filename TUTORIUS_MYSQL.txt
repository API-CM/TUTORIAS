CREATE TABLE USUARIOS(
UVUS_ALUMNO VARCHAR(15) PRIMARY KEY,
NOMBRE VARCHAR(20),
APELLIDO1 VARCHAR(20),
APELLIDO2 VARCHAR(20),
PASSWORD VARCHAR(20),
EMAIL VARCHAR(50)
);

CREATE TABLE ASIG_FAVORITAS(
UVUS_ALUMNO VARCHAR(15),
ID_ASIGNATURA INT,
PRIMARY KEY (UVUS_ALUMNO,ID_ASIGNATURA)
);


CREATE TABLE FRANJAS_HORARIAS(
ID_FRANJA_HORARIA INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
DIA_SEMANA VARCHAR(10),
HORA_INICIO VARCHAR(5),
HORA_FIN VARCHAR(5)
);


CREATE TABLE DIAS_HORARIOS(
UVUS_PROFESOR VARCHAR(15),
ID_FRANJA_HORARIA INT,
PRIMARY KEY (UVUS_PROFESOR,ID_FRANJA_HORARIA)
);


CREATE TABLE DEPARTAMENTOS(
ID_DEPARTAMENTO INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
NOMBRE VARCHAR(50),
SIGLAS VARCHAR(5)
);

CREATE TABLE ASIGNATURAS(
ID_ASIGNATURA INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
NOMBRE VARCHAR(100),
SIGLAS VARCHAR(8),
ID_DEPARTAMENTO INT,
FOREIGN KEY (ID_DEPARTAMENTO) REFERENCES DEPARTAMENTOS(ID_DEPARTAMENTO)
);

CREATE TABLE ASIG_IMPARTIDAS(
UVUS_PROFESOR VARCHAR(15),
ID_ASIGNATURA INT,
PRIMARY KEY (UVUS_PROFESOR,ID_ASIGNATURA)
);


CREATE TABLE PROFESORES(
UVUS_PROFESOR VARCHAR(15) PRIMARY KEY,
NOMBRE VARCHAR(20),
APELLIDO1 VARCHAR(20),
APELLIDO2 VARCHAR(20),
PASSWORD VARCHAR(20),
EMAIL VARCHAR(50),
DESPACHO VARCHAR(6),
DISPONIBILIDAD BOOLEAN DEFAULT FALSE,
PLANO_DESPACHO BLOB NULL,
FOTO_PERSONAL BLOB NULL,
ID_DEPARTAMENTO INT,
ID_ASIGNATURA INT,
FOREIGN KEY (ID_DEPARTAMENTO) REFERENCES DEPARTAMENTOS(ID_DEPARTAMENTO)

);


CREATE TABLE RESERVAS(
ID_RESERVA INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
FECHA DATE,
UVUS_ALUMNO VARCHAR(15),
UVUS_PROFESOR VARCHAR(15),
ID_FRANJA_HORARIA INT,
CONSTRAINT FOREIGN KEY (UVUS_ALUMNO) REFERENCES USUARIOS(UVUS_ALUMNO) ON DELETE SET NULL ON UPDATE CASCADE,
CONSTRAINT FOREIGN KEY (UVUS_PROFESOR) REFERENCES PROFESORES(UVUS_PROFESOR) ON DELETE SET NULL ON UPDATE CASCADE,
CONSTRAINT FOREIGN KEY (ID_FRANJA_HORARIA) REFERENCES FRANJAS_HORARIAS(ID_FRANJA_HORARIA) ON DELETE SET NULL ON UPDATE CASCADE
);





DELIMITER //
create procedure INSERTAR_FRANJA_HORARIA (IN W_DIA_SEMANA VARCHAR(10),W_HORA_INICIO VARCHAR(5), W_HORA_FIN VARCHAR(5))
begin
    INSERT INTO FRANJAS_HORARIAS VALUES(NULL,W_DIA_SEMANA,W_HORA_INICIO,W_HORA_FIN);
END//
DELIMITER ;

DELIMITER //
create procedure INSERTAR_RESERVA (W_FECHA DATE, W_UVUS_ALUMNO VARCHAR(15),W_UVUS_PROFESOR VARCHAR(15),W_ID_FRANJA_HORARIA INT)
begin
    INSERT INTO RESERVAS VALUES(NULL,W_FECHA,W_UVUS_ALUMNO,W_UVUS_PROFESOR,W_ID_FRANJA_HORARIA);
END//
DELIMITER ;



DELIMITER //
create procedure INSERTAR_DEPARTAMENTO (W_NOMBRE VARCHAR(50),W_SIGLAS VARCHAR(5))
begin
    INSERT INTO DEPARTAMENTOS VALUES(NULL,W_NOMBRE,W_SIGLAS);
END//
DELIMITER ;


DELIMITER //
create procedure INSERTAR_ASIGNATURA (W_NOMBRE VARCHAR(100),W_SIGLAS VARCHAR(8),W_ID_DEPARTAMENTO INT)
begin
    INSERT INTO ASIGNATURAS VALUES(NULL,W_NOMBRE,W_SIGLAS,W_ID_DEPARTAMENTO);
END//
DELIMITER ;


INSERT INTO USUARIOS (UVUS_ALUMNO,NOMBRE,APELLIDO1,APELLIDO2,PASSWORD,EMAIL) VALUES('alvsanmun','Álvaro','Santos','Muñoz','Admin1234','alvaro_santos92@hotmail.com');
INSERT INTO USUARIOS (UVUS_ALUMNO,NOMBRE,APELLIDO1,APELLIDO2,PASSWORD,EMAIL) VALUES('enrparalv','Enrique','Pardo','Álvarez','Admin1234','enriquezpalvarez@gmail.com');
INSERT INTO USUARIOS (UVUS_ALUMNO,NOMBRE,APELLIDO1,APELLIDO2,PASSWORD,EMAIL) VALUES('antjimveg','Antonio','Jimenez','Vega','Admin1234','ant.jim.v@gmail.com');
INSERT INTO USUARIOS (UVUS_ALUMNO,NOMBRE,APELLIDO1,APELLIDO2,PASSWORD,EMAIL) VALUES('marestucl','Mario','Esteban','Uclés','Admin1234','mario.esteban@posteo.es');

CALL INSERTAR_DEPARTAMENTO('Tecnología Electrónica', 'DTE');
CALL INSERTAR_DEPARTAMENTO('Locos Sin Identificación', 'LSI');
CALL INSERTAR_DEPARTAMENTO('Arquitectura y Tecnolog. de Computadores', 'ATC');
CALL INSERTAR_DEPARTAMENTO('Matemática Aplicada I', 'MA1');
CALL INSERTAR_DEPARTAMENTO('Biología Celular', 'BC');


CALL INSERTAR_ASIGNATURA('Circuitos Electrónicos Digitales','CED',1);
CALL INSERTAR_ASIGNATURA('Fundamentos de Programación','FP',2);
CALL INSERTAR_ASIGNATURA('Arquitectura de Computadores','AC',3);
CALL INSERTAR_ASIGNATURA('Álgebra Lineal y Numérica','ALN',4);
CALL INSERTAR_ASIGNATURA('Estructura de Computadores','EdC',1);
CALL INSERTAR_ASIGNATURA('Análisis y Diseño de Datos y Algoritmos','ADDA',2);
CALL INSERTAR_ASIGNATURA('Arquitectura de Sistemas Distribuidos','ASD',3);
CALL INSERTAR_ASIGNATURA('Cálculo Infinitesimal y Numérico','CIN',4);
CALL INSERTAR_ASIGNATURA('Redes de Computadores','RC',1);
CALL INSERTAR_ASIGNATURA('Introducción a la Ingeniería del Software y los Sistemas de Información','IISSI',2);
CALL INSERTAR_ASIGNATURA('Configuración, Implementación, y Mantenimiento de Sistemas Informáticos','CIMSI',3);
CALL INSERTAR_ASIGNATURA('Introducción a la Matemática Discreta','IMD',4);
CALL INSERTAR_ASIGNATURA('Arquitectura de Redes','AR',1);
CALL INSERTAR_ASIGNATURA('Sistemas Operativos','SO',2);
CALL INSERTAR_ASIGNATURA('Computación Móvil','CM',3);
CALL INSERTAR_ASIGNATURA('Matemática Discreta','MD',4);
CALL INSERTAR_ASIGNATURA('Sistemas Orientados a Servicios','SOS',2);
CALL INSERTAR_ASIGNATURA('Circuitos','C',3);
CALL INSERTAR_ASIGNATURA('Matemática Aplicada a Sistemas de Información','MASI',4);
CALL INSERTAR_ASIGNATURA('Anatomía y Fisiología','AF',5);




INSERT INTO PROFESORES (UVUS_PROFESOR,NOMBRE,APELLIDO1,APELLIDO2,PASSWORD,EMAIL,DESPACHO,DISPONIBILIDAD,ID_DEPARTAMENTO,ID_ASIGNATURA) VALUES('profesor1','Jorge','Ropero','Sinde','Admin1234','hola@prof.es','G0.24',FALSE,1,1);
INSERT INTO PROFESORES (UVUS_PROFESOR,NOMBRE,APELLIDO1,APELLIDO2,PASSWORD,EMAIL,DESPACHO,DISPONIBILIDAD,ID_DEPARTAMENTO,ID_ASIGNATURA) VALUES('profesor2','Rafa','Lopez','Martín','Admin1234','hola@prof.es','F0.24',FALSE,2,2);
INSERT INTO PROFESORES (UVUS_PROFESOR,NOMBRE,APELLIDO1,APELLIDO2,PASSWORD,EMAIL,DESPACHO,DISPONIBILIDAD,ID_DEPARTAMENTO,ID_ASIGNATURA) VALUES('profesor3','Diego','Carrasco','Flores','Admin1234','hola@prof.es','E1.02',FALSE,3,3);
INSERT INTO PROFESORES (UVUS_PROFESOR,NOMBRE,APELLIDO1,APELLIDO2,PASSWORD,EMAIL,DESPACHO,DISPONIBILIDAD,ID_DEPARTAMENTO,ID_ASIGNATURA) VALUES('profesor4','Luis','Fernandez','Marquez','Admin1234','hola@prof.es','A0.44',FALSE,4,4);



